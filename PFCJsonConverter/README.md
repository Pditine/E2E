# PFCJson转换器

### 简介

这是用于与PurpleFlowerCore联合使用的excel数据转json工具，用于Unity游戏开发的数据配置。转换器会在生成Json文件的同时生成C#文件，用于在C#代码中直接引用数据。

### 表结构

表结构如[常用表结构](../README.md)，在此基础上添加了更多tag

![image-20250301202622572](https://tuchuange.oss-cn-beijing.aliyuncs.com/img/image-20250301202622572.png)

- key：用于指定数据在Json层级结构和C#Dictionary数据结构的索引主键
- ref：用于指定生成C#代码直接引用数据的字段名称
- comment：如存在ref，则在C#中生成注释

### 生成示例

Json文件

```json
{
	"1001":{
		"ID":1001,
		"Name":"AXE",
		"ATK":50,
		"Dictance":100,
		"CD":0.5
		},
	"1002":{
		"ID":1002,
		"Name":"M416",
		"ATK":5,
		"Dictance":1000,
		"CD":0.05
		},
	"1003":{
		"ID":1003,
		"Name":"spear",
		"ATK":30,
		"Dictance":200,
		"CD":0.5
		}
}
```

C#文件

```C#
// This script is auto-generated by E2E
// Do not modify this script manually
// url: https://github.com/Pditine/E2E
using System;
using PurpleFlowerCore.Config;

namespace PurpleFlowerCore
{
    public class WeaponData1 : JsonConfig< WeaponData1Item>
    {
        protected override string GetLoadPath()
        {
            return "Assets/Data/Json/WeaponData1.json";
        }

        /// <summary>
        /// ID: 1001, 这是一把斧头
        /// </summary>
        public WeaponData1Item AXE => GetItem("1001"); 

        /// <summary>
        /// ID: 1002, 这是一把枪
        /// </summary>
        public WeaponData1Item M416 => GetItem("1002"); 

        /// <summary>
        /// ID: 1003, 这是一柄长矛
        /// </summary>
        public WeaponData1Item spear => GetItem("1003"); 
    }

    public abstract partial class PFCConfig
    {
        public static WeaponData1 WeaponData1 = new WeaponData1();
    }

    [Serializable]
    public class WeaponData1Item
    {
        public string Name; // 名称
        public int ATK; // 攻击力
        public float Dictance; // 攻击距离
        public float CD; // CD
    }
}
```

### 使用示例

![image-20250301211439307](https://tuchuange.oss-cn-beijing.aliyuncs.com/img/image-20250301211439307.png)

